(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225b46"],{e610:function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("a-upload",{attrs:{name:"file",listType:"picture-card",multiple:e.isMultiple,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,isMultiple:e.isMultiple,showUploadList:e.isMultiple},on:{change:e.handleChange,preview:e.handlePreview}},[!e.isMultiple&&e.picUrl?t("img",{staticStyle:{height:"104px","max-width":"300px"},attrs:{src:e.getAvatarView()}}):t("div",[t("a-icon",{attrs:{type:e.uploadLoading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(i){return e.handleCancel()}}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},s=[],n=t("2b0e"),l=t("9fb0"),r=t("0fea"),o=t("4ec3"),u=function(){return"-"+parseInt(1e4*Math.random()+1,10)},d=function(e){if(e.lastIndexOf("\\")>=0){var i=new RegExp("\\\\","g");e=e.replace(i,"/")}return e.substring(e.lastIndexOf("/")+1)},h={name:"JImageUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",uploadLoading:!1,picUrl:!1,headers:{},fileList:[],previewImage:"",previewVisible:!1,sizeLimit:0,uploadGoOn:!0}},props:{text:{type:String,required:!1,default:"上传"},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},isMultiple:{type:Boolean,required:!1,default:!1}},watch:{value:function(e){e instanceof Array?this.initFileList(e.join(",")):this.initFileList(e)}},created:function(){this.initFileSizeLimit();var e=n["a"].ls.get(l["a"]);this.headers={"X-Access-Token":e}},methods:{initFileSizeLimit:function(){var e=this;Object(o["U"])().then((function(i){200===i.code&&(e.sizeLimit=i.data)}))},initFileList:function(e){if(!e||0==e.length)return this.fileList=[],void(this.picUrl=!1);this.picUrl=!0;for(var i=[],t=e.split(","),a=0;a<t.length;a++){var s=Object(r["d"])("systemConfig/static/"+t[a]);i.push({uid:u(),name:d(t[a]),status:"done",url:s,response:{code:"history",data:t[a]}})}this.fileList=i},beforeUpload:function(e){this.uploadGoOn=!0;var i=e.type,t=e.size;if(i.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(t>this.sizeLimit){var a=(this.sizeLimit/1024/1024).toFixed(2);return this.$message.warning("抱歉，图片大小不能超过"+a+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop(),this.picUrl=!1;var i=e.fileList;"done"===e.file.status?200===e.file.response.code&&(this.picUrl=!0,i=i.map((function(e){return e.response&&(e.url=e.response.data),e}))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=i,"done"!==e.file.status&&"removed"!==e.file.status||this.handlePathChange()},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},getAvatarView:function(){if(this.fileList.length>0){var e=this.fileList[0].url;return e}},handlePathChange:function(){var e=this.fileList,i="";e&&0!=e.length||(i="");var t=[];if(this.isMultiple)for(var a=0;a<e.length;a++)t.push(e[a].response.data);else t.push(e[e.length-1].response.data);t.length>0&&(i=t.join(",")),this.$emit("change",i)},handleDelete:function(e){},handleCancel:function(){this.close(),this.previewVisible=!1},close:function(){}},model:{prop:"value",event:"change"}},p=h,c=t("2877"),f=Object(c["a"])(p,a,s,!1,null,"2b496df3",null);i["default"]=f.exports}}]);