(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-328ac472","chunk-81928aa8","chunk-4b81e15c","chunk-7c958500","chunk-2d0bdf09","chunk-2d20ede5"],{"0f9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-select-biz-component",e._g(e._b({attrs:{value:e.value,ellipsisLength:25,listUrl:e.url.list,columns:e.columns}},"j-select-biz-component",e.attrs,!1),e.$listeners))},i=[],r=a("b296"),l={name:"JSelectMultiUser",components:{JSelectBizComponent:r["default"]},props:["value"],data:function(){return{url:{list:"/sys/user/list"},columns:[{title:"姓名",align:"center",width:"25%",widthRight:"70%",dataIndex:"realname"},{title:"账号",align:"center",width:"25%",dataIndex:"username"},{title:"电话",align:"center",width:"20%",dataIndex:"phone"},{title:"出生日期",align:"center",width:"20%",dataIndex:"birthday"}],default:{name:"用户",width:1200,displayKey:"realname",returnKeys:["id","username"],queryParamText:"账号"}}},computed:{attrs:function(){return Object.assign(this.default,this.$attrs)}}},s=l,o=a("2877"),c=Object(o["a"])(s,n,i,!1,null,"050d9629",null);t["default"]=c.exports},"2dab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],r=a("c1df"),l=a.n(r),s={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD HH:mm:ss",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?l()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?l()(e,this.dateFormat):null}},methods:{moment:l.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},o=s,c=a("2877"),u=Object(c["a"])(o,n,i,!1,null,null,null);t["default"]=u.exports},3595:function(e,t,a){},"61df":function(e,t,a){},"8c6e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"j-super-query-box"},[e._t("button",(function(){return[e.superQueryFlag?a("a-tooltip",e._b({attrs:{mouseLeaveDelay:.2}},"a-tooltip",e.tooltipProps,!1),[a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.tooltipProps))]),a("template",{slot:"title"},[a("span",[e._v("已有高级查询条件生效")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleReset}},[e._v("清空")])],1),a("a-button-group",[a("a-button",{attrs:{type:"primary"},on:{click:e.handleOpen}},[a("a-icon",{attrs:{type:"appstore",theme:"twoTone",spin:""}}),a("span",[e._v("高级查询")])],1),e.izMobile?a("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.handleReset}}):e._e()],1)],2):a("a-button",{attrs:{type:"primary",icon:"filter"},on:{click:e.handleOpen}},[e._v("高级查询")])]}),{isActive:e.superQueryFlag,isMobile:e.izMobile,open:e.handleOpen,reset:e.handleReset}),a("j-modal",{staticClass:"j-super-query-modal",staticStyle:{top:"5%","max-height":"95%"},attrs:{title:"高级查询构造器",width:1e3,visible:e.visible,mask:!1,fullscreen:e.izMobile},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("div",{staticStyle:{float:"left"}},[a("a-button",{attrs:{loading:e.loading},on:{click:e.handleReset}},[e._v("重置")]),a("a-button",{attrs:{loading:e.loading},on:{click:e.handleSave}},[e._v("保存查询条件")])],1),a("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[e._v("关闭")]),a("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleOk}},[e._v("查询")])],1),a("a-spin",{attrs:{spinning:e.loading}},[a("a-row",[a("a-col",{attrs:{sm:24,md:19}},[0===e.queryParamsModel.length?a("a-empty",{staticStyle:{"margin-bottom":"12px"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("span",[e._v("没有任何查询条件")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleAdd}},[e._v("点击新增")])],1)]):a("a-form",{attrs:{layout:"inline"}},[a("a-row",{staticStyle:{"margin-bottom":"12px"}},[a("a-col",{attrs:{md:12,xs:24}},[a("a-form-item",{staticStyle:{width:"100%"},attrs:{label:"过滤条件匹配",labelCol:{md:6,xs:24},wrapperCol:{md:18,xs:24}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{getPopupContainer:function(e){return e.parentNode}},model:{value:e.matchType,callback:function(t){e.matchType=t},expression:"matchType"}},[a("a-select-option",{attrs:{value:"and"}},[e._v("AND（所有条件都要求匹配）")]),a("a-select-option",{attrs:{value:"or"}},[e._v("OR（条件中的任意一个匹配）")])],1)],1)],1)],1),e._l(e.queryParamsModel,(function(t,n){return a("a-row",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",gutter:16}},[a("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:8,xs:24}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",treeData:e.fieldTreeData,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:"选择查询字段",allowClear:"",treeDefaultExpandAll:"",getPopupContainer:function(e){return e.parentNode}},on:{select:function(a,n){return e.handleSelected(n,t)}},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"item.field"}})],1),a("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:4,xs:24}},[a("a-select",{attrs:{placeholder:"匹配规则",value:t.rule,getPopupContainer:function(e){return e.parentNode}},on:{change:function(a){return e.handleRuleChange(t,a)}}},[a("a-select-option",{attrs:{value:"eq"}},[e._v("等于")]),a("a-select-option",{attrs:{value:"like"}},[e._v("包含")]),a("a-select-option",{attrs:{value:"right_like"}},[e._v("以..开始")]),a("a-select-option",{attrs:{value:"left_like"}},[e._v("以..结尾")]),a("a-select-option",{attrs:{value:"in"}},[e._v("在...中")]),a("a-select-option",{attrs:{value:"ne"}},[e._v("不等于")]),a("a-select-option",{attrs:{value:"gt"}},[e._v("大于")]),a("a-select-option",{attrs:{value:"ge"}},[e._v("大于等于")]),a("a-select-option",{attrs:{value:"lt"}},[e._v("小于")]),a("a-select-option",{attrs:{value:"le"}},[e._v("小于等于")])],1)],1),a("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:8,xs:24}},[t.dictCode?["table-dict"===t.type?[a("j-popup",{attrs:{code:t.dictTable,field:t.dictCode,orgFields:t.dictCode,destFields:t.dictCode},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})]:[a("j-multi-select-tag",{directives:[{name:"show",rawName:"v-show",value:e.allowMultiple(t),expression:"allowMultiple(item)"}],attrs:{dictCode:t.dictCode,placeholder:"请选择"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}),a("j-dict-select-tag",{directives:[{name:"show",rawName:"v-show",value:!e.allowMultiple(t),expression:"!allowMultiple(item)"}],attrs:{dictCode:t.dictCode,placeholder:"请选择"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})]]:"popup"===t.type?a("j-popup",e._b({attrs:{value:t.val,"group-id":"superQuery"},on:{input:function(a,n){return e.handleChangeJPopup(t,a,n)}}},"j-popup",t.popup,!1)):"select-user"===t.type||"sel_user"===t.type?a("j-select-multi-user",{attrs:{buttons:!1,multiple:!1,placeholder:"请选择用户",returnKeys:["id",t.customReturnField||"username"]},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"select-depart"===t.type||"sel_depart"===t.type?a("j-select-depart",{attrs:{multi:!1,placeholder:"请选择部门",customReturnField:t.customReturnField||"id"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):t.options instanceof Array?a("a-select",{attrs:{options:t.options,allowClear:"",placeholder:"请选择",mode:e.allowMultiple(t)?"multiple":""},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"area-linkage"===t.type||"pca"===t.type?a("j-area-linkage",{staticStyle:{width:"100%"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"date"==t.type?a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择日期"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"datetime"==t.type?a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择时间","show-time":!0,"date-format":"YYYY-MM-DD HH:mm:ss"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):"time"===t.type?a("a-time-picker",{staticStyle:{width:"100%"},attrs:{value:t.val?e.moment(t.val,"HH:mm:ss"):null,format:"HH:mm:ss"},on:{change:function(e,a){return t.val=a}}}):"int"==t.type||"number"==t.type?a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入数值"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}}):a("a-input",{attrs:{placeholder:"请输入值"},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"item.val"}})],2),a("a-col",{staticStyle:{"margin-bottom":"12px"},attrs:{md:4,xs:0}},[a("a-button",{attrs:{icon:"plus"},on:{click:e.handleAdd}}),e._v(" \r\n                "),a("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.handleDel(n)}}})],1),a("a-col",{staticStyle:{"margin-bottom":"12px","text-align":"right"},attrs:{md:0,xs:24}},[a("a-button",{attrs:{icon:"plus"},on:{click:e.handleAdd}}),e._v(" \r\n                "),a("a-button",{attrs:{icon:"minus"},on:{click:function(t){return e.handleDel(n)}}})],1)],1)}))],2)],1),a("a-col",{attrs:{sm:24,md:5}},[a("a-card",{staticClass:"j-super-query-history-card",attrs:{bordered:!0}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("\r\n              保存的查询\r\n            ")]),0===e.saveTreeData.length?a("a-empty",{staticClass:"j-super-query-history-empty",attrs:{description:"没有保存任何查询"}}):a("a-tree",{staticClass:"j-super-query-history-tree",attrs:{showIcon:"",treeData:e.saveTreeData,selectedKeys:[]},on:{select:e.handleTreeSelect}})],1)],1)],1)],1),a("a-modal",{attrs:{title:"请输入保存的名称",visible:e.prompt.visible},on:{cancel:function(t){e.prompt.visible=!1},ok:e.handlePromptOk}},[a("a-input",{model:{value:e.prompt.value,callback:function(t){e.$set(e.prompt,"value",t)},expression:"prompt.value"}})],1)],2)],2)},i=[],r=a("c1df"),l=a.n(r),s=a("ca00"),o=a("ac0d"),c=a("2dab"),u=a("fe54"),d=a("0f9d"),p=a("9e8f");function h(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw r}}}}function f(e,t){if(e){if("string"===typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={name:"JSuperQuery",mixins:[o["b"]],components:{JAreaLinkage:p["default"],JDate:c["default"],JSelectDepart:u["default"],JSelectMultiUser:d["default"]},props:{fieldList:{type:Array,required:!0},callback:{type:String,required:!1,default:"handleSuperQuery"},loading:{type:Boolean,default:!1},saveCode:{type:String,default:null}},data:function(){var e=this.$createElement;return{moment:l.a,fieldTreeData:[],prompt:{visible:!1,value:""},visible:!1,queryParamsModel:[],treeIcon:e("a-icon",{attrs:{type:"file-text"}}),saveTreeData:[],saveCodeBefore:"JSuperQuerySaved_",matchType:"and",superQueryFlag:!1}},computed:{izMobile:function(){return"mobile"===this.device},tooltipProps:function(){return this.izMobile?{visible:!1}:{}},fullSaveCode:function(){var e=this.saveCode;return null!=e&&""!==e||(e=this.$route.fullPath),this.saveCodeBefore+e}},watch:{fullSaveCode:{immediate:!0,handler:function(){var e=this,t=this.$ls.get(this.fullSaveCode);t instanceof Array&&(this.saveTreeData=t.map((function(t){return e.renderSaveTreeData(t)})))}},fieldList:{deep:!0,immediate:!0,handler:function(e){var t=[],a=[];e.forEach((function(e){var n=y({},e);n.label=n.label||n.text;var i=n.children instanceof Array;n.disabled=i,n.selectable=!i,i?(n.children=n.children.map((function(e){var t=y({},e);return t.label=t.label||t.text,t.label=n.label+"-"+t.label,t.value=n.value+","+t.value,t.val="",t})),n.val="",a.push(n)):t.push(n)})),this.fieldTreeData=t.concat(a)}}},methods:{show:function(){this.queryParamsModel&&0!==this.queryParamsModel.length||this.resetLine(),this.visible=!0},handleOk:function(){if(this.isNullArray(this.queryParamsModel))this.$message.warn("不能查询空条件");else{var e={matchType:this.matchType,params:this.removeEmptyObject(this.queryParamsModel)};this.izMobile&&(this.visible=!1),this.emitCallback(e)}},emitCallback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,a=void 0===t?[]:t,n=e.matchType,i=void 0===n?this.matchType:n;this.superQueryFlag=a&&a.length>0;var r,l=h(a);try{for(l.s();!(r=l.n()).done;){var s=r.value;Array.isArray(s.val)&&(s.val=s.val.join(","))}}catch(o){l.e(o)}finally{l.f()}this.$emit(this.callback,a,i)},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},handleAdd:function(){this.addNewLine()},addNewLine:function(){this.queryParamsModel.push({rule:"eq"})},resetLine:function(){this.superQueryFlag=!1,this.queryParamsModel=[],this.addNewLine()},handleDel:function(e){this.queryParamsModel.splice(e,1)},handleSelected:function(e,t){var a=e.dataRef,n=a.type,i=a.options,r=a.dictCode,l=a.dictTable,s=a.customReturnField,o=a.popup;t["type"]=n,t["options"]=i,t["dictCode"]=r,t["dictTable"]=l,t["customReturnField"]=s,o&&(t["popup"]=o),this.$set(t,"val",void 0)},handleOpen:function(){this.show()},handleReset:function(){this.resetLine(),this.emitCallback()},handleSave:function(){var e=this.removeEmptyObject(this.queryParamsModel);this.isNullArray(e)?this.$message.warning("空条件不能保存"):(this.prompt.value="",this.prompt.visible=!0)},handlePromptOk:function(){var e=this,t=this.prompt.value;if(t){var a=this.removeEmptyObject(this.queryParamsModel),n=this.saveTreeData.filter((function(e){return e.originTitle===t}));n.length>0?this.$confirm({content:"".concat(t," 已存在，是否覆盖？"),onOk:function(){e.prompt.visible=!1,n[0].records=a,e.saveToLocalStore(),e.$message.success("保存成功")}}):(this.prompt.visible=!1,this.saveTreeData.push(this.renderSaveTreeData({title:t,matchType:this.matchType,records:a})),this.saveToLocalStore(),this.$message.success("保存成功"))}else this.$message.warning("保存名称不能为空")},handleTreeSelect:function(e,t){if(t.selectedNodes[0]){var a=t.selectedNodes[0].data.props,n=a.matchType,i=a.records;this.matchType=n||this.matchType,this.queryParamsModel=s["b"](i)}},handleRemoveSaveTreeItem:function(e,t){var a=this;e.stopPropagation(),this.$confirm({content:"是否删除当前查询？",onOk:function(){var e=t.eventKey;a.saveTreeData.splice(Number.parseInt(e.substring(2)),1),a.saveToLocalStore()}})},saveToLocalStore:function(){var e=this.saveTreeData.map((function(e){var t=e.originTitle,a=e.matchType,n=e.records;return{title:t,matchType:a,records:n}}));this.$ls.set(this.fullSaveCode,e)},isNullArray:function(e){if(!e||0===e.length)return!0;if(1===e.length){var t=e[0];if(!t.field||null==t.val||""===t.val||!t.rule)return!0}return!1},removeEmptyObject:function(e){for(var t=s["b"](e),a=0;a<t.length;a++){var n=t[a];null==n||Object.keys(n).length<=0?t.splice(a--,1):Array.isArray(n.options)&&n.dictCode&&delete n.options}return t},renderSaveTreeData:function(e){var t=this,a=this.$createElement;return e.icon=this.treeIcon,e.originTitle=e["title"],e.title=function(e,n){var i=n.dataRef.originTitle;return a("div",{class:"j-history-tree-title"},[a("span",[i]),a("div",{class:"j-history-tree-title-closer",on:{click:function(e){return t.handleRemoveSaveTreeItem(e,n)}}},[a("a-icon",{attrs:{type:"close-circle"}})])])},e},allowMultiple:function(e){return"in"===e.rule},handleRuleChange:function(e,t){var a=e.rule;if(this.$set(e,"rule",t),"in"===a&&(e.dictCode||e.options instanceof Array)){var n=e.val;"string"===typeof e.val?n=e.val.split(",")[0]:Array.isArray(e.val)&&(n=e.val[0]),this.$set(e,"val",n)}},handleChangeJPopup:function(e,t,a){e.val=a[e.popup["destFields"]]}}},k=g,w=(a("8f9d"),a("2877")),S=Object(w["a"])(k,n,i,!1,null,"5755c32c",null);t["default"]=S.exports},"8f9d":function(e,t,a){"use strict";a("61df")},"942c":function(e,t,a){"use strict";a("3595")},9884:function(e,t,a){"use strict";a("a863")},a863:function(e,t,a){},b0cd:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[a("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),a("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var n=t.title;return[n.indexOf(e.searchValue)>-1?a("span",[e._v("\n          "+e._s(n.substr(0,n.indexOf(e.searchValue)))+"\n          "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(n.substr(n.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):a("span",[e._v(e._s(n))])]}}])})],1)],1)},i=[],r=a("4ec3");function l(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw r}}}}function s(e){return d(e)||u(e)||c(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var h={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(r["queryDepartTreeList"])().then((function(t){if(t.success){var a=s(t.result);e.reWriterWithSlot(a),e.treeData=a,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t,a=this.departId,n=l(this.dataList);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.indexOf(i.key)>=0&&(e+=","+i.title)}}catch(r){n.e(r)}finally{n.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,a=l(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.children&&n.children.length>0){this.reWriterWithSlot(n.children);var i=Object.assign({},n);i.children={},this.dataList.push(i)}else this.dataList.push(n),n.scopedSlots={title:"title"}}}catch(r){a.e(r)}finally{a.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,a=[],n=l(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.children&&i.children.length>0&&a.push(i.id)}}catch(r){n.e(r)}finally{n.f()}this.expandedKeys=[].concat(a)}else this.expandedKeys=[]},onCheck:function(e,t){var a=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var n=e.checked.filter((function(e){return a.checkedKeys.indexOf(e)<0}));this.checkedKeys=s(n),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var a=[];if(a.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var n,i=t.node.dataRef.key;if(this.checkedKeys.indexOf(i)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==i}));else(n=this.checkedKeys).push.apply(n,a)}else this.checkedKeys=[].concat(a),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var a,n=0;n<t.length;n++){var i=t[n];i.children&&(i.children.some((function(t){return t.key===e}))?a=i.key:this.getParentKey(e,i.children)&&(a=this.getParentKey(e,i.children)))}return a},onSearch:function(e){var t=this,a=this.dataList.map((function(a){return a.title.indexOf(e)>-1?t.getParentKey(a.key,t.treeData):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,a=function e(t,a){var n,i=l(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.id===a)return r;if(r.children instanceof Array){var s=e(r.children,a);if(null!=s)return s}}}catch(o){i.e(o)}finally{i.f()}return null},n=[],i=l(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,s=a(this.treeData,r);null!=s&&n.push(s)}}catch(o){i.e(o)}finally{i.f()}return n}}},f=h,m=a("2877"),v=Object(m["a"])(f,n,i,!1,null,"4907a211",null);t["default"]=v.exports},b296:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-row",{staticClass:"j-select-biz-component-box",attrs:{type:"flex",gutter:8}},[a("a-col",{staticClass:"left",class:{full:!e.buttons}},[e._t("left",(function(){return[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:e.placeholder,options:e.selectOptions,allowClear:"",disabled:e.disabled,open:e.selectOpen},on:{dropdownVisibleChange:e.handleDropdownVisibleChange},nativeOn:{click:function(t){e.visible=!e.buttons||e.visible}},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})]}))],2),e.buttons?a("a-col",{staticClass:"right"},[a("a-button",{attrs:{type:"primary",icon:"search",disabled:e.disabled},on:{click:function(t){e.visible=!0}}},[e._v(e._s(e.selectButtonText))])],1):e._e(),a("j-select-biz-component-modal",e._b({attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t},options:e.handleOptions},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"j-select-biz-component-modal",e.modalProps,!1))],1)},i=[],r=a("b16a"),l={name:"JSelectBizComponent",components:{JSelectBizComponentModal:r["default"]},props:{value:{type:String,default:""},returnId:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},displayKey:{type:String,default:null},returnKeys:{type:Array,default:function(){return["id","id"]}},selectButtonText:{type:String,default:"选择"}},data:function(){return{selectValue:[],selectOptions:[],dataSourceMap:{},visible:!1,selectOpen:!1}},computed:{valueKey:function(){return this.returnId?this.returnKeys[0]:this.returnKeys[1]},modalProps:function(){return Object.assign({valueKey:this.valueKey,multiple:this.multiple,returnKeys:this.returnKeys,displayKey:this.displayKey||this.valueKey},this.$attrs)}},watch:{value:{immediate:!0,handler:function(e){this.selectValue=e?e.split(","):[]}},selectValue:{deep:!0,handler:function(e){var t=this,a=e.map((function(e){return t.dataSourceMap[e]}));this.$emit("select",a);var n=e.join(",");this.$emit("input",n),this.$emit("change",n)}}},methods:{handleOptions:function(e,t){this.selectOptions=e,this.dataSourceMap=t},handleDropdownVisibleChange:function(){var e=this;this.selectOpen=!0,this.$nextTick((function(){e.selectOpen=!1}))}}},s=l,o=(a("942c"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,"11dfb11e",null);t["default"]=c.exports},fe54:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-input-demo-presuffix"},[a("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[a("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?a("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),a("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},i=[],r=a("b0cd"),l={name:"JSelectDepart",components:{JSelectDepartModal:r["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var a=this,n="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(n=e.map((function(e){return e[a.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",n)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},s=l,o=(a("9884"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,"4d448922",null);t["default"]=c.exports}}]);