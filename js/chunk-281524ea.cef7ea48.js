(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-281524ea"],{"243d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("j-modal",{staticStyle:{top:"5%",height:"100%","overflow-y":"hidden"},attrs:{title:t.title,width:t.width,visible:t.visible,confirmLoading:t.confirmLoading,maskClosable:!1,keyboard:!1,forceRender:!0,switchFullscreen:"",wrapClassName:"ant-modal-cust-warp"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form}},[a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"客户"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["organId",t.validatorRules.organId],expression:"[ 'organId', validatorRules.organId ]"}],attrs:{placeholder:"选择客户",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"}},t._l(t.cusList,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v("\n                  "+t._s(e.supplier)+"\n                ")])})),1)],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"经手人"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["handsPersonId",t.validatorRules.handsPersonId],expression:"[ 'handsPersonId', validatorRules.handsPersonId ]"}],attrs:{placeholder:"选择经手人",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"}},t._l(t.personList,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[a("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["billTime",t.validatorRules.billTime],expression:"['billTime', validatorRules.billTime]"}],attrs:{"show-time":!0}})],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["billNo"],expression:"[ 'billNo' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入单据编号",readOnly:!0}})],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("div",{staticClass:"action-button"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleClickAdd}},[t._v("新增")]),a("span",{staticClass:"gap"}),a("a-button",{attrs:{type:"primary",icon:"minus"},on:{click:t.handleClear}},[t._v("清空")])],1)])],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("j-editable-table",{ref:t.refKeys[0],attrs:{loading:t.accountTable.loading,columns:t.accountTable.columns,dataSource:t.accountTable.dataSource,maxHeight:300,rowNumber:!1,rowSelection:!1,actionButton:!1},on:{valueChange:t.onValueChange}})],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{lg:24,md:24,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],staticStyle:{"margin-top":"8px"},attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"收款账户"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["accountId",t.validatorRules.accountId],expression:"[ 'accountId', validatorRules.accountId ]"}],attrs:{placeholder:"选择收款账户",dropdownMatchSelectWidth:!1}},t._l(t.accountList,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"合计收款"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["totalPrice"],expression:"[ 'totalPrice' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入合计收款",readOnly:!0}})],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"优惠金额"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["discountMoney",t.validatorRules.discountMoney],expression:"[ 'discountMoney', validatorRules.discountMoney ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入优惠金额"},on:{keyup:t.onKeyUpDiscountMoney}})],1)],1),a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"实际收款"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeAmount"],expression:"[ 'changeAmount' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入实际收款",readOnly:!0}})],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{lg:6,md:12,sm:24}},[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"附件"}},[a("j-upload",{attrs:{bizPath:"financial"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)],1)],1)],1)],1)],1),a("debt-bill-list",{ref:"debtBillList",on:{ok:t.debtBillListOk}})],1)},i=[],r=a("88bc"),o=a.n(r),l=a("edbd"),s=a("e2e0"),c=a("d0ed"),u=a("267bb"),d=a("cf74"),m=a("2dab");function h(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=f(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){l=!0,r=t},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var b={name:"MoneyInModal",mixins:[c["a"],u["FinancialModalMixin"]],components:{DebtBillList:l["default"],JUpload:d["default"],JDate:m["default"]},data:function(){return{title:"操作",width:"1200px",moreStatus:!1,addDefaultRowNum:0,visible:!1,model:{},fileList:[],labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},refKeys:["accountDataTable"],activeKey:"accountDataTable",accountTable:{loading:!1,dataSource:[],columns:[{title:"销售单据编号",key:"billNumber",width:"20%",type:s["a"].input,readonly:!0},{title:"应收欠款",key:"needDebt",width:"10%",type:s["a"].inputNumber,statistics:!0,readonly:!0},{title:"已收欠款",key:"finishDebt",width:"10%",type:s["a"].inputNumber,statistics:!0,readonly:!0},{title:"本次收款",key:"eachAmount",width:"10%",type:s["a"].inputNumber,statistics:!0,placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"备注",key:"remark",width:"20%",type:s["a"].input,placeholder:"请输入${title}"}]},confirmLoading:!1,validatorRules:{organId:{rules:[{required:!0,message:"请选择客户!"}]},handsPersonId:{rules:[{required:!0,message:"请选择经手人!"}]},billTime:{rules:[{required:!0,message:"请选择单据日期!"}]},accountId:{rules:[{required:!0,message:"请选择收款账户!"}]},discountMoney:{rules:[{required:!0,message:"请输入优惠金额!"}]}},url:{add:"/accountHead/addAccountHeadAndDetail",edit:"/accountHead/updateAccountHeadAndDetail",detailList:"/accountItem/getDetailList"}}},created:function(){this.initAccount()},methods:{editAfter:function(){var t=this;if("add"===this.action)this.addInit("SK"),this.fileList=[];else{this.model.billTime=this.model.billTimeStr,this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,"organId","handsPersonId","billTime","billNo","remark","accountId","totalPrice","discountMoney","changeAmount"))})),this.fileList=this.model.fileName;var e={headerId:this.model.id},a=(this.readOnly,this.url.detailList);this.requestSubTableData(a,e,this.accountTable)}},classifyIntoFormData:function(t){var e=0,a=Object.assign(this.model,t.formValue),n=t.tablesValue[0].values;a.type="收款";var i,r=h(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;e+=o.eachAmount-0}}catch(l){r.e(l)}finally{r.f()}return a.totalPrice=e,this.fileList&&this.fileList.length>0&&(a.fileName=this.fileList),this.model.id&&(a.id=this.model.id),{info:JSON.stringify(a),rows:JSON.stringify(n)}},handleClickAdd:function(){var t=this.form.getFieldValue("organId");t?(this.$refs.debtBillList.show(t,"出库","销售","客户","0"),this.$refs.debtBillList.title="选择销售出库欠款单据"):this.$message.warning("请选择客户！")},handleClear:function(){this.accountTable.dataSource=[]}}},y=b,v=(a("a852"),a("2877")),g=Object(v["a"])(y,n,i,!1,null,"a517fa96",null);e["default"]=g.exports},"267bb":function(t,e,a){"use strict";a.r(e),a.d(e,"FinancialModalMixin",(function(){return c}));a("e2e0");var n=a("4ec3"),i=a("0fea"),r=a("ca00");function o(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=l(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function l(t,e){if(t){if("string"===typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var c={data:function(){return{action:"",supList:[],cusList:[],retailList:[],personList:[],accountList:[],spans:{labelCol1:{span:2},wrapperCol1:{span:22},labelCol1_5:{span:3},wrapperCol1_5:{span:21},labelCol2:{span:4},wrapperCol2:{span:20},labelCol3:{span:6},wrapperCol3:{span:18},labelCol6:{span:12},wrapperCol6:{span:12}}}},created:function(){this.initSupplier(),this.initCustomer(),this.initRetail(),this.initPerson()},computed:{readOnly:function(){return"add"!==this.action&&"edit"!==this.action}},methods:{addInit:function(t){var e=this;Object(i["c"])("/sequence/buildNumber").then((function(a){a&&200===a.code&&e.form.setFieldsValue({billNo:t+a.data.defaultNumber})})),this.$nextTick((function(){e.form.setFieldsValue({billTime:Object(r["g"])(),totalPrice:0,discountMoney:0,changeAmount:0})})),this.$nextTick((function(){Object(n["db"])({}).then((function(t){if(t&&200===t.code){var a,n=o(t.data.accountList);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.isDefault&&e.form.setFieldsValue({accountId:i.id})}}catch(r){n.e(r)}finally{n.f()}}}))}))},initSupplier:function(){var t=this;Object(n["Y"])({}).then((function(e){e&&(t.supList=e)}))},initCustomer:function(){var t=this;Object(n["W"])({}).then((function(e){e&&(t.cusList=e)}))},initRetail:function(){var t=this;Object(n["X"])({}).then((function(e){e&&(t.retailList=e)}))},initPerson:function(){var t=this;Object(n["jb"])({type:"财务员"}).then((function(e){e&&200===e.code&&(t.personList=e.data.personList)}))},initInOutItem:function(t){var e=this;Object(n["ab"])({type:t}).then((function(t){if(t)for(var a=0;a<t.length;a++){var n={};n.value=t[a].id+"",n.text=t[a].name,n.title=t[a].name;var i,r=o(e.accountTable.columns);try{for(r.s();!(i=r.n()).done;){var l=i.value;"inOutItemId"==l.key&&l.options.push(n)}}catch(s){r.e(s)}finally{r.f()}}}))},initAccount:function(){var t=this;Object(n["db"])({}).then((function(e){e&&200===e.code&&(t.accountList=e.data.accountList)}))},initDetailAccount:function(){var t=this;Object(n["db"])({}).then((function(e){if(e&&200===e.code)for(var a=e.data.accountList,n=0;n<a.length;n++){var i={};i.value=a[n].id+"",i.text=a[n].name,i.title=a[n].name;var r,l=o(t.accountTable.columns);try{for(l.s();!(r=l.n()).done;){var s=r.value;"accountId"==s.key&&s.options.push(i)}}catch(c){l.e(c)}finally{l.f()}}}))},onValueChange:function(t){var e=this,a=(t.type,t.row,t.column),n=(t.value,t.target);switch(a.key){case"eachAmount":n.recalcAllStatisticsColumns(),e.autoChangeAmount(n);break}},autoChangeAmount:function(t){var e=this,a=t.statisticsColumns.eachAmount-0,n=this.form.getFieldValue("discountMoney")-0;n||(n=0);var i=(a-n).toFixed(2);this.$nextTick((function(){e.form.setFieldsValue({totalPrice:a,changeAmount:i})}))},onKeyUpDiscountMoney:function(t){var e=this,a=t.target.value-0,n=this.form.getFieldValue("totalPrice")-0,i=(n-a).toFixed(2);this.$nextTick((function(){e.form.setFieldsValue({changeAmount:i})}))},debtBillListOk:function(t){t&&t.length>0&&this.requestSubTableDataEx(t,this.accountTable)},requestSubTableDataEx:function(t,e,a){var n=this;e.loading=!0;for(var i=[],r=0,o=0;o<t.length;o++){var l=t[o];l.billNumber=l.number,l.needDebt=(l.discountLastMoney+l.otherMoney-l.changeAmount).toFixed(2),l.eachAmount=(l.discountLastMoney+l.otherMoney-l.changeAmount-l.finishDebt).toFixed(2),0!=l.eachAmount&&(r+=l.eachAmount-0,i.push(l))}e.dataSource=i,this.$nextTick((function(){n.form.setFieldsValue({totalPrice:r,changeAmount:r})})),"function"===typeof a&&a(res),e.loading=!1}}}},8264:function(t,e,a){},a852:function(t,e,a){"use strict";a("8264")},d0ed:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("7550"),i=a("e2e0"),r=a("0fea"),o={components:{JEditableTable:n["default"]},data:function(){return{title:"操作",visible:!1,form:this.$form.createForm(this),confirmLoading:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},methods:{getAllTable:function(){var t=this;if(!(this.refKeys instanceof Array))throw this.throwNotArray("refKeys");var e=this.refKeys.map((function(e){return Object(i["c"])(t,e)}));return Promise.all(e)},eachAllTable:function(t){this.getAllTable().then((function(e){e.forEach((function(e,a){"function"===typeof t&&t(e,a)}))}))},add:function(){"function"===typeof this.addBefore&&this.addBefore();var t=this.addDefaultRowNum;"number"!==typeof t&&(t=1),this.eachAllTable((function(e){e.add(t)})),"function"===typeof this.addAfter&&this.addAfter(this.model),this.edit({})},edit:function(t){"function"===typeof this.editBefore&&this.editBefore(t),this.visible=!0,this.activeKey=this.refKeys[0],this.form.resetFields(),this.model=Object.assign({},t),"function"===typeof this.editAfter&&this.editAfter(this.model)},close:function(){this.visible=!1,this.eachAllTable((function(t){t.initialize()})),this.$emit("close")},requestSubTableData:function(t,e,a,n){a.loading=!0,Object(r["c"])(t,e).then((function(t){t&&200===t.code&&(a.dataSource=t.data.rows,"function"===typeof n&&n(t))})).finally((function(){a.loading=!1}))},request:function(t){var e=this,a=this.url.add,n="post";this.model.id&&(a=this.url.edit,n="put"),this.confirmLoading=!0,Object(r["e"])(a,t,n).then((function(t){200===t.code?(e.$emit("ok"),e.confirmLoading=!1,e.close()):(e.$message.warning(t.data.message),e.confirmLoading=!1)})).finally((function(){}))},handleChangeTabs:function(t){Object(i["c"])(this,t).then((function(t){t.resetScrollTop()}))},handleCancel:function(){this.close()},handleOk:function(){var t=this;this.getAllTable().then((function(e){return Object(i["d"])(t.form,e)})).then((function(e){if("function"!==typeof t.classifyIntoFormData)throw t.throwNotFunction("classifyIntoFormData");var a=t.classifyIntoFormData(e);return t.request(a)})).catch((function(e){e.error===i["b"]&&(t.activeKey=null==e.index?t.activeKey:t.refKeys[e.index])}))},throwNotFunction:function(t){return"".concat(t," 未定义或不是一个函数")},throwNotArray:function(t){return"".concat(t," 未定义或不是一个数组")}}}},edbd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{staticStyle:{top:"5%",height:"100%","overflow-y":"hidden"},attrs:{title:t.title,width:1150,visible:t.visible,cancelText:"关闭",wrapClassName:"ant-modal-cust-warp"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:8}},[a("a-form-item",{attrs:{label:"单据编号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入单据编号查询"},model:{value:t.queryParam.number,callback:function(e){t.$set(t.queryParam,"number",e)},expression:"queryParam.number"}})],1)],1),a("a-col",{attrs:{md:6,sm:8}},[a("a-form-item",{attrs:{label:"商品信息",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入名称、规格、型号"},model:{value:t.queryParam.materialParam,callback:function(e){t.$set(t.queryParam,"materialParam",e)},expression:"queryParam.materialParam"}})],1)],1),a("a-col",{attrs:{md:7,sm:10}},[a("a-form-item",{attrs:{label:"单据日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-range-picker",{staticStyle:{width:"210px"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:t.onDateChange,ok:t.onDateOk},model:{value:t.queryParam.createTimeRange,callback:function(e){t.$set(t.queryParam,"createTimeRange",e)},expression:"queryParam.createTimeRange"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.searchReset}},[t._v("重置")])],1)],1)],1)],1)],1),a("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:t.columns,dataSource:t.dataSource,pagination:t.ipagination,loading:t.loading,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,type:t.getType},customRow:t.rowAction},on:{change:t.handleTableChange}})],1)},i=[],r=a("b65a"),o=a("2b0e"),l={name:"DebtBillList",mixins:[r["a"]],data:function(){return{title:"操作",visible:!1,disableMixinCreated:!0,selectedRowKeys:[],selectionRows:[],selectBillRows:[],selectBillIds:"",queryParam:{organId:"",materialParam:"",number:"",type:"",subType:"",roleType:o["a"].ls.get("roleType"),status:""},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},columns:[{title:"#",dataIndex:"",key:"rowIndex",width:40,align:"center",customRender:function(t,e,a){return parseInt(a)+1}},{title:"",dataIndex:"organName",width:120},{title:"单据编号",dataIndex:"number",width:120},{title:"商品信息",dataIndex:"materialsList",width:200,ellipsis:!0,customRender:function(t,e,a){if(t)return t.replace(",","，")}},{title:"单据日期",dataIndex:"operTimeStr",width:130},{title:"操作员",dataIndex:"userName",width:60},{title:"欠款",dataIndex:"needDebt",width:70,customRender:function(t,e,a){return(e.discountLastMoney+e.otherMoney-e.changeAmount).toFixed(2)}},{title:"已收欠款",dataIndex:"finishDebt",width:70},{title:"待收欠款",dataIndex:"debt",width:70,customRender:function(t,e,a){return(e.discountLastMoney+e.otherMoney-e.changeAmount-e.finishDebt).toFixed(2)}}],url:{list:"/depotHead/debtList"}}},computed:{getType:function(){return"checkbox"}},created:function(){},methods:{show:function(t,e,a,n,i){this.queryParam.organId=t,this.queryParam.type=e,this.queryParam.subType=a,this.queryParam.status=i,this.columns[1].title=n,"入库"===e?(this.columns[7].title="已付欠款",this.columns[8].title="待付欠款"):"出库"===e&&(this.columns[7].title="已收欠款",this.columns[8].title="待收欠款"),this.model=Object.assign({},{}),this.visible=!0,this.ipagination.pageSize=100,this.ipagination.pageSizeOptions=["100","200","300"],this.loadData(1)},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectionRows=e},handleOk:function(){this.getSelectBillRows(),this.$emit("ok",this.selectBillRows),this.close()},onDateChange:function(t,e){this.queryParam.beginTime=e[0],this.queryParam.endTime=e[1]},onDateOk:function(t){},searchReset:function(){this.queryParam={type:this.queryParam.type,subType:this.queryParam.subType},this.loadData(1)},getSelectBillRows:function(){var t=this.dataSource,e="";this.selectBillRows=[];for(var a=0,n=t.length;a<n;a++)this.selectedRowKeys.includes(t[a].id)&&(this.selectBillRows.push(t[a]),e=e+","+t[a].id);this.selectBillIds=e.substring(1)},rowAction:function(t,e){var a=this;return{on:{click:function(){var e=[];e.push(t.id),a.selectedRowKeys=e},dblclick:function(){var e=[];e.push(t.id),a.selectedRowKeys=e,a.handleOk()}}}}}},s=l,c=a("2877"),u=Object(c["a"])(s,n,i,!1,null,"577f0196",null);e["default"]=u.exports}}]);