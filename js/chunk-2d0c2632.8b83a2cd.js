(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c2632"],{"49a8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange}})},a=[],o=r("0fea");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){return s(e)||c(e)||f(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e){if(Array.isArray(e))return h(e)}function d(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y={name:"JCategorySelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},disabled:{type:Boolean,default:!1,required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1},pid:{type:String,default:"",required:!1},pcode:{type:String,default:"",required:!1},back:{type:String,default:"",required:!1}},data:function(){return{treeValue:"",treeData:[],url:"/sys/category/loadTreeData",view:"/sys/category/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},pcode:function(){this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.loadRoot(),e.loadItemByCode()}))},methods:{loadRoot:function(){var e=this,t={pid:this.pid,pcode:this.pcode?this.pcode:"0",condition:this.condition};Object(o["c"])(this.url,t).then((function(t){if(t.success&&t.result){var r,n=d(t.result);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.value=a.key,0==a.leaf?a.isLeaf=!1:1==a.leaf&&(a.isLeaf=!0)}}catch(o){n.e(o)}finally{n.f()}e.treeData=l(t.result)}}))},loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(o["c"])(this.view,{ids:this.value}).then((function(t){if(t.success){var r=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:r[t],value:r[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=[]},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.backValue(this.value,e)},backValue:function(e,t){var r={};this.back&&(r[this.back]=t),this.$emit("change",e,r)},asyncLoadTreeData:function(e){var t=this;return new Promise((function(r){if(e.$vnode.children)r();else{var n=e.$vnode.key,a={pid:n,condition:t.condition};Object(o["c"])(t.url,a).then((function(e){if(e.success){var a,o=d(e.result);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.value=i.key,0==i.leaf?i.isLeaf=!1:1==i.leaf&&(i.isLeaf=!0)}}catch(u){o.e(u)}finally{o.f()}t.addChildren(n,e.result,t.treeData),t.treeData=l(t.treeData)}r()}))}}))},addChildren:function(e,t,r){if(r&&r.length>0){var n,a=d(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.key==e){t&&0!=t.length?o.children=t:o.isLeaf=!0;break}this.addChildren(e,t,o.children)}}catch(i){a.e(i)}finally{a.f()}}},onChange:function(e){e?e instanceof Array||(this.backValue(e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue="")},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(r,n){if(t)try{var a=JSON.parse(t);"object"==i(a)&&a?r():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),n())}catch(o){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),n()}else r()}))}},model:{prop:"value",event:"change"}},p=y,v=r("2877"),m=Object(v["a"])(p,n,a,!1,null,null,null);t["default"]=m.exports}}]);